<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="Author" content="Ernie Rael">
  <meta name="GENERATOR" content="Mozilla/4.7 [en] (WinNT; U) [Netscape]">
  <meta name="Description" content="status and documentation of jVi">
  <title>jVi Home Page</title>
  <LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">
</head>
<body>



<h1>jVi in NetBeans</h1>
<h2 id="intro" class="MainSec00Font">Introduction</h2>

<p>
Now you can use vi/vim commands while taking advantage of the NetBeans
editors' code completion, templates, fixing compiler errors quickly and access
to other IDE features.
</p>
<p>For proper <b>undo/redo granularity</b> there is a
<a href="https://sourceforge.net/project/platformdownload.php?group_id=3653">
        small patch for netbeans</a>. NOTE: not needed for NetBeans 7.
</p>
 
<p>
The keystrokes that are delivered to jVi is a configuration option.
See <a href="#keys">Key Bindings</a> below.
</p>

<p>Look at <a href="CHANGES.html">recent changes to jVi</a>
and <a href="nbvi.issues">jVi in NetBeans status, issues and bugs</a>.
</p>

<p>Disable/enable jVi using Main Menu <i>Tools > jVi</i> checkbox.
    There is also a toggle action that can be bound to a shortcut.
</p>

<p>
<b> Log bugs at
    <a href="http://sourceforge.net/bugs/?group_id=3653" target="_top">
jVi Bug Tracking</a>.</b>
Please include both the <b>jVi version number</b> and the
<b>NetBeans version number</b>,
e.g. NB5.5, when reporting problems.
Get the version of jVi with the <span class="tt">:version</span> command,
also the version of jVi in use is displayed on the
<i>jVi Options and Configuration</i> editing option property page..
</p>
<p>

Discuss your issues, problems and/or requests at
<a href="http://sourceforge.net/forum/forum.php?forum_id=10908">
jVi Open Discussion Forum</a>. 
This is a good way to indicate what you'd like to see in jVi for NetBeans.

Communications can also be sent to
<a href="mailto:jvi@raelity.com">jVi</a>.
</p>

<h2 id="normal" class="MainSec00Font">Normal Mode</h2>
There are some Normal Mode commands that hook into NetBeans features.
<table border="1" cellpadding="3">
    <tbody>
        <tr>
            <td><span class="tt">Ctrl-]</span></td>
            <td>Go To Declaration</td>
        </tr>
        <tr>
            <td><span class="tt">m{.&lt;&gt;}</span></td>
            <td>toggle bookmark, previous bookmark, next bookmark</td>
        </tr>
        <tr>
            <td><span class="tt">z{ocRM}</span></td>
            <td>expand fold, collapse fold, expand all, collapse all</td>
        </tr>
        <tr>
            <td><span class="tt">g{,;}</span></td>
            <td>Jump to Next Edit Cross Window, Jump to Previous Edit Cross Window</td>
        </tr>
        <tr>
            <td><span class="tt">gt</span>, <span class="tt">gT</span></td>
            <td>Go to the next/previous editor tab page.
                Wraps around from first to last.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="colon" class="MainSec00Font">Colon Commands</h2>
<h2 class="MainSec01Font">NetBeans colon command hooks</h2>
<table id="nb-hooks" border="1" cellpadding="3">
    <tbody>
        <tr>
            <td><span class="tt">:se[t]</span></td>
            <td>See <a href="COLON_COMMANDS">Colon Commands</a> for
                information on available options. See <a href="#options">
                Netbeans options information</a> for platform interactions
                of the <span class="tt">sw</span>, <span class="tt">et</span>,
                <span class="tt">ts</span>, <span class="tt">nu</span>
                options.
            </td>
        </tr>
        <tr>
            <td><span class="tt">:e#[&lt;digit&gt;]</span></td>
            <td>
                After <span class="tt">:e#</span>
                code completion allows the selection
                of an open file. There is a jVi option <i>":e#" Auto popup</i>.
            </td>
        </tr>
        <tr>
                <td><span class="tt">:g/.../p</span>,
                    <span class="tt">:g/.../s/.../p</span>,
                <span class="tt">:1,$s/.../p</span></td>
            <td>The output of these commands go to an Output window
                with hyperlinks</td>
        </tr>
        <tr>
            <td><span class="tt">:ls</span>, <span class="tt">:buffers</span>, <span class="tt">:files</span></td>
            <td>The output of these commands go to an Output window</td>
        </tr>
        <tr>
                <td><span class="tt">:n[ext]</span>, <span class="tt">:N[ext]</span>,
                <span class="tt">:prev[ious]</span></td>
            <td>Operate on MRU file list, otherwise similar to vim. For
                example, <span class="tt">:3N</span> goes to the third previously file
                active</td>
        </tr>
        <tr>
            <td><span class="tt">:q[uit]</span>,
                <span class="tt">:wq[!]</span></td>
            <td>Close the curernt tab. Return to the previously active
                tab; for example <span class="tt">Ctrl-]</span>,
                <span class="tt">Ctrl-]</span>,
                <span class="tt">:q</span>,
                <span class="tt">:q</span> gets you back
                to where you started.</td>
        </tr>
        <tr>
            <td><span class="tt">:ts [&lt;any-chars&gt;]</span>,
            <br/><span class="tt">:ta &lt;any-chars&gt;</span></td>
            <td>These bring up the "Go To Class" dialog.</td>
        </tr>
        <tr>
            <td><span class="tt">:gr[ep]</span> </td>
            <td>perform "Find Usages" action on the identifier under
            the cursor.</td>
        </tr>
        <tr>
            <td><span class="tt">:mak[e]&nbsp;&lt;op&gt; &lt;target&gt;</span>
            </td>
            <td>
                &lt;op&gt; ::=
                <span class="tt">
                    [ b[uild] | c[lean] | r[ebuild] | d[oc] | de[bug] | ru[n] ]
                </span>
                <br/>&lt;target&gt; ::= <span class="tt">
                    [ m[ain] | p[roject] | % ] </span>
                for main-project current-project current-file.
                <br/>Default &lt;op&gt; is <span class="tt">build</span>,
                default &lt;target&gt; is <span class="tt">main</span>. So entering
                <span class="tt">:mak</span> is the same as
                <span class="tt">:make build main</span>.
            </td>
        </tr>
        <tr>
            <td><span class="tt">:cn[ext]</span></td>
            <td>Goto the next in the list. In addition to compiler errors,
                it applies to many lists; for example in the diff window
                and in the output area,
            such as Find Usages or &quot;g/pattern/p&quot;.</td>
        </tr>
        <tr>
            <td><span class="tt">:cp[revious]</span>,
                <span class="tt">:cN[ext]</span></td>
            <td>Goto the previous in the list.</td>
        </tr>
        <tr>
            <td> <span class="tt">:tabn[ext]</span>,
                <span class="tt">:tabp[revious]</span>,
                <span class="tt">:tabN[ext]</span>
            </td>
            <td>Go to the next/previous editor tab page.
                Wraps around from first to last.
            </td>
        </tr>
        <tr>
            <td><span class="tt">:tog[gle] [&lt;view-pane&gt;]</span></td>
            <td>
                &lt;view-pane&gt; ::= <span class="tt">bo[ttom] | ou[tput] | de[bug]</span>
                <br/>toggle some NetBeans' window(s) visibility. With no
                arguments is the same as <span class="tt">bottom</span>.
                <span class="tt">output</span> is the output mode; some windows that
                go here are Output and Usages.
                <span class="tt">debug</span> are the debug windows.
                <span class="tt">bottom</span> is both of output and debug.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="refactoring" class="MainSec01Font">Refactoring commands</h2>
The following commands bring up the indicated dialog. Typically the cursor
should be set as needed before executing the command.
<table border="1" cellpadding="3">
    <tbody>
        <tr>
            <td><span class="tt">:rfr[ename]</span></td>
            <td>Refactor &gt; Rename...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfm[ove]</span></td>
            <td>Refactor &gt; Move...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfc[opy]</span></td>
            <td>Refactor &gt; Copy...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfde[lete]</span>,
                <span class="tt">:rfsa[fedelete]</span></td>
            <td>Refactor &gt; Safe Delete...</td>
        </tr>
        <tr><td></td></tr>
        <tr>
            <td><span class="tt">:rfch[angemethodparameters]</span></td>
            <td>Refactor &gt; Change Method Parameters...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfenc[apsulatefields]</span></td>
            <td>Refactor &gt; Encapsulate Fields...</td>
        </tr>
        <tr><td></td></tr>
        <tr>
            <td><span class="tt">:rfup</span>,
                <span class="tt">:rfpul[lup]</span></td>
            <td>Refactor &gt; Pull Up...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfdo[wn]</span>,
                <span class="tt">:rfpus[hdown]</span></td>
            <td>Refactor &gt; Push Down...</td>
        </tr>
        <tr><td></td><td></td></tr>
        <tr>
            <td><span class="tt">:rfvar[iable]</span></td>
            <td>Refactor &gt; Introduce Variable...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfcon[stant]</span></td>
            <td>Refactor &gt; Introduce Constant...</td>
        </tr>
        <tr>
            <td><span class="tt">:rffie[ld]</span></td>
            <td>Refactor &gt; Introduce Field...</td>
        </tr>
        <tr>
            <td><span class="tt">:rfmet[hod]</span></td>
            <td>Refactor &gt; Introduce Method...</td>
        </tr>
    </tbody>
</table>

<h2 id="execution" class="MainSec01Font">Execution</h2>
<i>These are not implemented yet</i>
<table border="1" cellpadding="3">
    <tbody>
        <tr>
            <td><span class="tt">:run</span></td>
            <td>Use <span class="tt">:make run</span></td>
        </tr>
        <tr>
            <td><span class="tt">:deb[ug]</span></td>
            <td>Use <span class="tt">:make debug</span></td>
        </tr>
    </tbody>
</table>

<!--
<dd>This command is used to show/hide stuff in the browser window.
The visible state of the specified &lt;view-pane&gt; is toggled.
This might
better be done with the ":set" command but there are
technical difficulties. So, for now at least, there is the toggle command.
This will probably also be available from the set command in some future
release.
The &lt;view-pane&gt; can be any one of:
  <ul>
    <li><span class="tt">cur[tain]</span></li>
    <li><span class="tt">mes[sages]</span></li>
    <li><span class="tt">con[tent]</span></li>
    <li><span class="tt">pro[ject]</span></li>
    <li><span class="tt">str[ucture]</span></li>
    <li><span class="tt">sta[tusbar]</span></li>
    <li><span class="tt">tab[s]</span></li>
  </ul>
Note: the "<span class="tt">tabs</span>" view-pane is only available if the
        <a href="http://www.users.fast.net/~jpmcgrath/cosmetics/"
	target="_top">Cosmetics</a> open tool is loaded. It hides/shows
	the filename tabs of the editor.
</dd>
-->

<h2 id="options" class="MainSec00Font">Options</h2>
<p>
    <img SRC="images/jViMiscOptionsPage.png"
         ALT="Built for NetBeans"
         align="right" border="0"/>
    There are several options that control jVi's behavior. They can be found
    though NetBeans' Main Menu at
    <i>Tools &gt; Options &gt; AdvancedOptions &gt; Editing &gt;
    jViOptionsAndConfiguration</i>.
    Note that there are Sub Pages that contain jVi options as well. Most of these
    are well known vim options. If you click on an option name, a description of
    the option is displayed. The option names can generally be used in vim to get
    help if you want a more detailed description of what the option does.
</p>
<p>
    <b><span class="tt">:set</span> options details.</b> The options
    <span class="tt">shiftwidth</span>, <span class="tt">expandtabs</span>
    and <span class="tt">tabstop</span> are per file
    options, so that any editor clones of a given file have the same value for
    these options.
    Different files can have different values for these options. The values
    set through the GUI are the default values for the options, so setting the
    values in the GUI is like putting them in a .vimrc. Any <i>modeline</i>
    settings are applied after the GUI option values.
    <b>Note that jVi
        changes the NetBeans values of these options to keep NetBeans in sync
    with the options of the file being edited.</b> The 
    <span class="tt">number</span> options should be per window,
    but netbeans applys it to all windows.
</p>

<p>NetBeans options are shared where applicable.
For example, there is only one <i>IgnoreCase</i> flag in the system. jVi
shares this settings with NetBeans. If you change this option in one place, it
is changed in the other. The only other fully shared option is <i>wrapscan</i>.
</p>
<p>
Autoindent and other such editor features are handled and configured through
NetBeans.  </p>

<h2 id="keys" class="MainSec00Font">Key Bindings</h2>

<p>
        <img SRC="images/jViKeyOptionsPage.png"
        ALT="Built for NetBeans"
        align="right" border="0"/>
Keybindings that are not delivered to jVi are passed on to the next keymap in
line. For example, jVi does not catch any key strokes that use the Alt key.
<p>
Configure the Keys that are caught by jVi though its
<i>Control-Key Bindings</i> and <i>Keypad Bindings</i>
options pages. If a key is not checked
(disabled) then it can be used for NetBeans keybindings. For example, uncheck
Ctrl-I and then this key brings up NetBeans' <i>Override and Implement
Methods</i> dialog. And of course there's ^C, ^X and ^V. The Ctrl-J starts some
pretty good NetBeans multi-key bindings.
</p>
<p>You may want to bind the Find dialog to a keybinding other than Ctrl-F to
get easy access to it. At least until jVi is hooked into incremental search
and hilight.

<h2 id="search" class="MainSec00Font">Text Search</h2>
<p>
    <p>
        There are options for controlling metacharacter escaping.
        By default vim requires that several RE metacharacters be escaped.
        For example '|' and '(', with the <b>RE Meta Escape</b> option you
        can specify which characters must be escaped.
        Check
        <A HREF="pattern.txt" TARGET="mainFrame">Searching and Patterns</A>
        for information on searching and a description of the options.
        <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Pattern.html">
        javadocs describe the pattern syntax</a>.
    </p>
    
    <h2 id="custom" class="MainSec00Font">Customization</h2>
    
    <p>
        Here is an example for adding a simple ":" command that takes no arguments.
        Refer to
        <a href="jvi-javadoc/com/raelity/jvi/ColonCommands.html">ColonCommands</a>
        and its inner clases API for more info, such as handling line number and
        arguments as in <span class="tt">:3,7 mycom arg arg</span>.
        The source of the ActionEvent is the JEditorPane from where the command
        is executed. I haven't actully tried it, <span class="tt">ColonCommands</span> is in the
        <i>jVi Core</i> module.
    </p>
    
    <pre>
<code>

    import org.netbeans.modules.whatever;
    import com.raelity.jvi.ColonCommands;
    import org.netbeans.modules.jvi.Module;

    class MyStuff {

      private void registerJViCommands() {
        ColonCommands.register("com", "command", whatever.someAction);
	// Execute something out of the FileSystem, could be a SystemAction
	ColonCommands.register("plat", "platform",
	    new Module.DelelgateFileSystemAction("org-what-ever.instance"));
      }
    }
</code>
    </pre>

<!-- raelity copyright -->
<hr>
<address class="addr">
Copyright &copy; 2011 Raelity Engineering</address>
<a href="mailto:support@raelity.com" class="addr">
Contact Raelity Engineering</a>
</body>
</html>
